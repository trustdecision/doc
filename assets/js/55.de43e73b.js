(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{345:function(t,a,s){"use strict";s.r(a);var n=s(10),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"集成要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成要求"}},[t._v("#")]),t._v(" 集成要求")]),t._v(" "),a("h2",{attrs:{id:"合规说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#合规说明"}},[t._v("#")]),t._v(" 合规说明")]),t._v(" "),a("p",[t._v("请注意，在贵司的App中集成同盾提供的SDK产品时:")]),t._v(" "),a("p",[t._v("1.1 根据《网络安全法》《电信条例》《电信和互联网用户个人信息保护规定》等相关法律法规要求及监管实践中的标准，在贵司的最终用户首次启动App并在贵司开始采集信息之前，贵司应以交互界面或设计（如隐私政策弹窗等）向最终用户完整告知收集、使用、与第三方共享最终用户个人信息的目的、方式和范围，并征得最终用户的明示同意。")]),t._v(" "),a("p",[t._v("1.2 为向贵司提供业务安全和风控服务，同盾SDK将采集、处理、使用用户的手机终端唯一标志信息（IMEI/IDFA）、Android ID、IMSI、MEID、MAC 地址、SIM 卡序列号、设备序列号、设备类型、设备型号、系统类型、地理位置、登录 IP 地址等设备信息。为确保贵司使用相关服务的合规性，前述隐私政策应涵盖对同盾SDK提供服务并采集、处理、使用相关信息的授权，以下条款内容供贵司参考，具体表述可由贵司根据贵司隐私协议的整体框架和内容自行确定：")]),t._v(" "),a("table",{attrs:{border:"1"}},[a("tr",[a("td",{staticStyle:{"background-color":"#FAFAFA"}},[a("font",{attrs:{size:"2"}},[t._v("同盾SDK：为了业务安全和风控，我司使用了同盾 SDK，该 SDK 需要获取您的手机终端唯一标志信息（IMEI/IDFA）、Android ID、IMSI、MEID、MAC 地址、SIM卡序列号、设备序列号、设备类型、设备型号、系统类型、地理位置、登录 IP 地址、应用程序列表、运行中进程信息、传感器（光传感器、重力传感器、磁场传感器、加速度传感器、陀螺仪传感器）相关设备信息，用于设备欺诈风险识别。")])],1)])]),t._v(" "),a("p",[t._v("同盾隐私协议："),a("a",{attrs:{href:"https://www.tongdun.cn/other/privacy/id=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.tongdun.cn/other/privacy/id=1"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"环境要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境要求"}},[t._v("#")]),t._v(" 环境要求")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("条目")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("兼容版本")]),t._v(" "),a("td",[t._v("iOS9.0+")])]),t._v(" "),a("tr",[a("td",[t._v("支持架构")]),t._v(" "),a("td",[t._v("armv7, arm64, x86_64")])])])]),t._v(" "),a("h1",{attrs:{id:"集成步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成步骤"}},[t._v("#")]),t._v(" 集成步骤")]),t._v(" "),a("h2",{attrs:{id:"cocoapods集成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cocoapods集成"}},[t._v("#")]),t._v(" CocoaPods集成")]),t._v(" "),a("ul",[a("li",[t._v("在 Podfile 文件中对应 target 中新增 "),a("code",[t._v("pod 'TrustDecisionPro', '4.2.4.2'")])]),t._v(" "),a("li",[t._v("在 Podfile 所在文件夹中执行 "),a("code",[t._v("pod install --repo-update")]),t._v(" 命令 (M1系列mac电脑需要执行 "),a("code",[t._v("arch -x86_64 pod install --repo-update")]),t._v(" 命令)")])]),t._v(" "),a("h2",{attrs:{id:"sdk目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sdk目录"}},[t._v("#")]),t._v(" SDK目录")]),t._v(" "),a("p",[t._v("Pods/TrustDecisionPro 文件夹下存在如下文件:")]),t._v(" "),a("ul",[a("li",[t._v("TDMobRisk.framework（终端SDK主文件，静态库类型）")]),t._v(" "),a("li",[t._v("TDCorePlugin.framework （终端SDK依赖核心插件，Embed动态库类型）")])]),t._v(" "),a("h2",{attrs:{id:"引入头文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入头文件"}},[t._v("#")]),t._v(" 引入头文件")]),t._v(" "),a("p",[t._v("在调用的位置引入头文件\nObjective C")]),t._v(" "),a("div",{staticClass:"language-objective extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("#import <TDMobRisk/TDMobRisk.h>\n")])])]),a("p",[t._v("Swift")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDMobRisk")]),t._v("\n")])])]),a("h2",{attrs:{id:"sdk初始化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sdk初始化"}},[t._v("#")]),t._v(" SDK初始化")]),t._v(" "),a("p",[a("strong",[t._v("注意事项")])]),t._v(" "),a("p",[t._v("安装后首次启动时，在用户同意隐私协议后，再进行SDK初始化。\n避免出现用户未同意隐私协议就进行SDK初始化采集，引发合规风险事故。")]),t._v(" "),a("p",[a("strong",[t._v("接口定义")])]),t._v(" "),a("div",{staticClass:"language-c extra-class"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("initWithOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSDictionary "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("示例代码")]),t._v("\nObjective C")]),t._v(" "),a("div",{staticClass:"language-objective extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('- (void)initTrustDecisionSDK:(void (^)(NSString *blackbox))callback {\n  TDMobRiskManager_t *riskManager = [TDMobRiskManager sharedManager];\n  NSMutableDictionary *options = [NSMutableDictionary dictionary];\n  \n  /*************************** 必传 ***************************/\n  // 合作方编码，如tongdun，参考下面`必传配置`\n  [options setValue:@"请输入您的合作方编码" forKey:@"partner"];\n  // 同盾平台注册的应用标识，参考下面`必传配置`\n  [options setValue:@"请输入您的appKey" forKey:@"appKey"];\n  // 同盾平台注册的应用名称，参考下面`必传配置`\n  [options setValue:@"请输入您的appName" forKey:@"appName"];\n  // 国家地区参数，参考下面`必传配置`\n  [options setValue:@"请输入您所在的国家地区" forKey:@"country"];\n\n  /*************************** 选传 ***************************/\n#ifdef DEBUG\n  // !!! DEBUG模式下若不设置此参数，app运行会闪退\n  [options setValue:@"allowed" forKey:@"allowed"];\n#endif\n\n  [options setValue:^(NSString *blackbox) {\n    // 此处回调在子线程\n    // 网络正常的情况下，会在200-300ms内返回结果。\n    // 网络异常的情况下，会在超时时间timeLimit（默认最长15s）后返回。\n    // 请在下方添加您对blackbox的处理逻辑\n    if (callback) {\n        callback(blackbox);\n    }\n  } forKey:@"callback"];\n  riskManager->initWithOptions(options);\n}\n')])])]),a("p",[t._v("Swift")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-definition function"}},[t._v("initTrustDecisionSDK")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@escaping")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token omit keyword"}},[t._v("_")]),t._v(" blackBox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" riskManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDMobRiskManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sharedManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*************************** 必传 ***************************/")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 合作方编码，如tongdun，参考下面`必传配置`")]),t._v("\n  options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请输入您的合作方编码"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"partner"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同盾平台注册的应用标识，参考下面`必传配置`")]),t._v("\n  options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请输入您的appKey"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appKey"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同盾平台注册的应用名称，参考下面`必传配置`")]),t._v("\n  options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请输入您的appName"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appName"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 国家地区参数，参考下面`必传配置`")]),t._v("\n  options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请输入您所在的国家地区"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"country"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*************************** 选传 ***************************/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token directive property"}},[a("span",{pre:!0,attrs:{class:"token directive-name"}},[t._v("#if")]),t._v(" DEBUG")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// !!! DEBUG模式下若不设置此参数，app运行会闪退")]),t._v("\n  options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"allowed"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"allowed"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token directive property"}},[a("span",{pre:!0,attrs:{class:"token directive-name"}},[t._v("#endif")])]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" tdcallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("blackBox "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此处回调在子线程")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 网络正常的情况下，会在200-300ms内返回结果。")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 网络异常的情况下，会在超时时间timeLimit（默认最长15s）后返回。")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请在下方添加您对blackbox的处理逻辑")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blackBox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"callback"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsafeBitCast")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tdcallback "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attribute atrule"}},[t._v("@convention")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("block"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnyObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSObject")]),t._v("\n  riskManager"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pointee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initWithOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("必传配置")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("配置 key")]),t._v(" "),a("th",[t._v("定义")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("场景")]),t._v(" "),a("th",[t._v("示例代码")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("partner")]),t._v(" "),a("td",[t._v("合作方编码")]),t._v(" "),a("td",[t._v("同盾的合作方编码，请联系同盾运营获取")]),t._v(" "),a("td",[t._v("所有场景")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:@"请输入您的合作方编码" forKey:@"partner"]; '),a("strong",[t._v("Swift")]),t._v(' options.updateValue("请输入您的合作方编码" as NSObject, forKey: "partner")')])]),t._v(" "),a("tr",[a("td",[t._v("appKey")]),t._v(" "),a("td",[t._v("应用标识")]),t._v(" "),a("td",[t._v("同盾生成的应用标识，和app绑定，用于校验app的有效性，请联系同盾运营获取 appkey创建需要用户提供应用包名、小写的sha256 签名。 ⚠️不同应用的包名签名不要使用相同的值")]),t._v(" "),a("td",[t._v("所有场景")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:@"请输入您的appKey" forKey:@"appKey"]; '),a("strong",[t._v("Swift")]),t._v(' options.updateValue("请输入您的appKey" as NSObject, forKey: "appKey")')])]),t._v(" "),a("tr",[a("td",[t._v("appName")]),t._v(" "),a("td",[t._v("应用名称")]),t._v(" "),a("td",[t._v("同盾平台注册的应用名称，请联系同盾运营获取")]),t._v(" "),a("td",[t._v("所有场景")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:@"请输入您的appName" forKey:@"appName"]; '),a("strong",[t._v("Swift")]),t._v(' options.updateValue("请输入您的appName" as NSObject, forKey: "appName")')])]),t._v(" "),a("tr",[a("td",[t._v("country")]),t._v(" "),a("td",[t._v("国家地区")]),t._v(" "),a("td",[t._v("国家地区参数，如cn sg us fra")]),t._v(" "),a("td",[t._v("根据国家地区填写对应参数。 cn代表中国， sg代表新加坡， us代表北美， fra代表欧洲")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:@"请输入您所在的国家地区" forKey:@"country"]; '),a("strong",[t._v("Swift")]),t._v(' options.updateValue("请输入您所在的国家地区" as NSObject, forKey: "country")')])])])]),t._v(" "),a("h2",{attrs:{id:"获取sdk版本号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取sdk版本号"}},[t._v("#")]),t._v(" 获取SDK版本号")]),t._v(" "),a("p",[a("strong",[t._v("示例代码")]),t._v("\nObjective C")]),t._v(" "),a("div",{staticClass:"language-objective extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 获取SDK版本号\nTDMobRiskManager_t *riskManager = [TDMobRiskManager sharedManager];\nNSString *sdkVersion = riskManager->getSDKVersion();\n")])])]),a("p",[t._v("Swift")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取SDK版本号")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" riskManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDMobRiskManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sharedManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sdkVersion "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" riskManager"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pointee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSDKVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h1",{attrs:{id:"设备指纹功能模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设备指纹功能模块"}},[t._v("#")]),t._v(" 设备指纹功能模块")]),t._v(" "),a("h2",{attrs:{id:"initwithoptions选传参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#initwithoptions选传参数"}},[t._v("#")]),t._v(" initWithOptions选传参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("配置 key")]),t._v(" "),a("th",[t._v("定义")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("场景")]),t._v(" "),a("th",[t._v("示例代码")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("allowed")]),t._v(" "),a("td",[t._v("SDK反调试配置")]),t._v(" "),a("td",[t._v("集成SDK后App默认具有反调试功能，开发者根据具体情况进行对应设置")]),t._v(" "),a("td",[t._v("**开发阶段：**Xcode调试请打开此配置 **打包测试/上架阶段：**移除此配置")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:@"allowed" forKey:@"allowed"]; '),a("strong",[t._v("Swift")]),t._v(' options.updateValue("allowed" as NSObject, forKey: "allowed")')])]),t._v(" "),a("tr",[a("td",[t._v("timeLimit")]),t._v(" "),a("td",[t._v("SDK超时时间配置（单位:秒）")]),t._v(" "),a("td",[t._v("SDK初始化采集上报后，网络请求回调的超时时间，SDK默认为15s")]),t._v(" "),a("td",[t._v("开发者需要控制SDK上报以后的网络请求超时时间，请设置此配置")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:@"5" forKey:@"timeLimit"]; '),a("strong",[t._v("Swift")]),t._v(' options.updateValue("5" as NSObject, forKey: "timeLimit")')])]),t._v(" "),a("tr",[a("td",[t._v("noLocation")]),t._v(" "),a("td",[t._v("SDK地理定位信息采集配置")]),t._v(" "),a("td",[t._v("SDK本身不主动进行定位授权，完全依赖App的权限")]),t._v(" "),a("td",[t._v("禁止SDK获取定位信息，请设置此配置")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:@"noLocation" forKey:@"noLocation"]; '),a("strong",[t._v("Swift")]),t._v(' options.updateValue("noLocation" as NSObject, forKey: "noLocation")')])]),t._v(" "),a("tr",[a("td",[t._v("noIDFA")]),t._v(" "),a("td",[t._v("SDK广告标识符（IDFA）采集配置")]),t._v(" "),a("td",[t._v("SDK本身不主动进行广告标识符授权，完全依赖App的权限设置此配置后，可以通过苹果对于广告标识符的静态扫码检查")]),t._v(" "),a("td",[t._v("禁止SDK获取和执行广告标识符（IDFA）相关代码，请设置此配置")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:@"noIDFA" forKey:@"noIDFA"]; '),a("strong",[t._v("Swift")]),t._v(' options.updateValue("noIDFA" as NSObject, forKey: "noIDFA")')])]),t._v(" "),a("tr",[a("td",[t._v("noDeviceName")]),t._v(" "),a("td",[t._v("设备名称（deviceName）采集配置")]),t._v(" "),a("td",[t._v("集成SDK后，SDK默认会采集当前设备名称，开发者根据具体情况进行对应设置")]),t._v(" "),a("td",[t._v("禁止SDK采集设备名称，请设置此配置")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:@"noDeviceName" forKey:@"noDeviceName"]; '),a("strong",[t._v("Swift")]),t._v(' options.updateValue("noDeviceName" as NSObject, forKey: "noDeviceName")')])]),t._v(" "),a("tr",[a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("SDK异步回调配置")]),t._v(" "),a("td",[t._v("SDK初始化采集上报后，根据网络请求结果返回blackbox。 "),a("strong",[t._v("请求成功：")]),t._v(" 返回非降级blackbox "),a("strong",[t._v("请求失败：")]),t._v(" 返回降级blackbox")]),t._v(" "),a("td",[t._v("尽可能获取到非降级blackbox")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:^(NSString *blackbox) {} forKey:@"callback"]; '),a("strong",[t._v("Swift")]),t._v(' let callback: (String)-> Void = {blackBox in } options["callback"] = unsafeBitCast(callback as @convention(block) (String) -> Void, to: AnyObject.self) as? NSObject')])]),t._v(" "),a("tr",[a("td",[t._v("collectLevel")]),t._v(" "),a("td",[t._v("降级blackbox采集字段长度配置")]),t._v(" "),a("td",[t._v("降级的blackbox会较长。通过此配置可控制降级的blackbox长度")]),t._v(" "),a("td",[t._v("需要blackbox长度较短时建议使用此配置 "),a("strong",[t._v("不设置：")]),t._v(" 降级blackbox长度为5000个字符左右（根据实际设备情况会有上浮） **设置：**降级blackbox长度为2000个字符左右")]),t._v(" "),a("td",[a("strong",[t._v("Objective C")]),t._v(' [options setValue:@"M" forKey:@"collectLevel"]; '),a("strong",[t._v("Swift")]),t._v(' options.updateValue("M" as NSObject, forKey: "collectLevel")')])])])]),t._v(" "),a("h2",{attrs:{id:"获取blackbox"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取blackbox"}},[t._v("#")]),t._v(" 获取blackbox")]),t._v(" "),a("p",[a("strong",[t._v("注意事项")])]),t._v(" "),a("ul",[a("li",[t._v("请在 "),a("code",[t._v("initWithOptions")]),t._v("后 "),a("code",[t._v("getBlackBox")]),t._v("，否则会引起SDK异常")]),t._v(" "),a("li",[t._v("建议开发者不要在App内对 "),a("code",[t._v("getBlackBox")]),t._v("返回的结果进行缓存，获取blackbox请依赖此函数")])]),t._v(" "),a("p",[a("strong",[t._v("示例代码")]),t._v("\nObjective C")]),t._v(" "),a("div",{staticClass:"language-objective extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 同步获取blackbox，未进行SDK初始化禁止调用，否则会引起SDK异常。\nTDMobRiskManager_t *riskManager = [TDMobRiskManager sharedManager];\nNSString *blackbox = riskManager->getBlackBox();\n")])])]),a("p",[t._v("Swift")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同步获取blackbox，未进行SDK初始化禁止调用，否则会引起SDK异常。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" riskManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDMobRiskManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sharedManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" blackBox "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" riskManager"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pointee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBlackBox")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h1",{attrs:{id:"faq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),a("p",[a("strong",[t._v("Q1")]),t._v("：引入终端SDK后，工程无法再进行 Xcode 调试，如何解决？")]),t._v(" "),a("p",[a("strong",[t._v("A1")]),t._v("：请参考 "),a("a",{attrs:{href:"https://doc.trustdecision.com/API?article=36952&version=152#SDK%E5%88%9D%E5%A7%8B%E5%8C%96",target:"_blank",rel:"noopener noreferrer"}},[t._v("SDK初始化"),a("OutboundLink")],1),t._v(" 在终端SDK初始化时，加入如下参数\nObjective C")]),t._v(" "),a("div",{staticClass:"language-objective extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('[options setValue:@"allowed" forKey:@"allowed"];\n')])])]),a("p",[t._v("Swift")]),t._v(" "),a("div",{staticClass:"language-swift extra-class"},[a("pre",{pre:!0,attrs:{class:"language-swift"}},[a("code",[t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"allowed"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NSObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"allowed"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);