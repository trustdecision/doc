(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{343:function(t,a,s){"use strict";s.r(a);var n=s(10),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"集成要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成要求"}},[t._v("#")]),t._v(" 集成要求")]),t._v(" "),a("h2",{attrs:{id:"合规说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#合规说明"}},[t._v("#")]),t._v(" 合规说明")]),t._v(" "),a("p",[t._v("请注意，在贵司的App中集成同盾提供的SDK产品时:")]),t._v(" "),a("p",[t._v("1.1 根据《网络安全法》《电信条例》《电信和互联网用户个人信息保护规定》等相关法律法规要求及监管实践中的标准，在贵司的最终用户首次启动App并在贵司开始采集信息之前，贵司应以交互界面或设计（如隐私政策弹窗等）向最终用户完整告知收集、使用、与第三方共享最终用户个人信息的目的、方式和范围，并征得最终用户的明示同意。")]),t._v(" "),a("p",[t._v("1.2 为向贵司提供业务安全和风控服务，同盾SDK将采集、处理、使用用户的手机终端唯一标志信息（IMEI/IDFA）、Android ID、IMSI、MEID、MAC 地址、SIM 卡序列号、设备序列号、设备类型、设备型号、系统类型、地理位置、登录 IP 地址等设备信息。为确保贵司使用相关服务的合规性，前述隐私政策应涵盖对同盾SDK提供服务并采集、处理、使用相关信息的授权，以下条款内容供贵司参考，具体表述可由贵司根据贵司隐私协议的整体框架和内容自行确定：\n"),a("table",{attrs:{border:"1"}},[a("tr",[a("td",{staticStyle:{"background-color":"#FAFAFA"}},[a("font",{attrs:{size:"2"}},[t._v("同盾SDK：为了业务安全和风控，我司使用了同盾 SDK，该 SDK 需要获取您的手机终端唯一标志信息（IMEI/IDFA）、Android ID、IMSI、MEID、MAC 地址、SIM卡序列号、设备序列号、设备类型、设备型号、系统类型、地理位置、登录 IP 地址、应用程序列表、运行中进程信息、传感器（光传感器、重力传感器、磁场传感器、加速度传感器、陀螺仪传感器）相关设备信息，用于设备欺诈风险识别。")])],1)])])]),t._v(" "),a("p",[t._v("同盾隐私协议："),a("a",{attrs:{href:"https://www.tongdun.cn/other/privacy/id=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.tongdun.cn/other/privacy/id=1"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"环境要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境要求"}},[t._v("#")]),t._v(" 环境要求")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("条目")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("兼容版本")]),t._v(" "),a("td",[t._v("支持主流机型，Android 4.4及以上系统")])]),t._v(" "),a("tr",[a("td",[t._v("支持架构")]),t._v(" "),a("td",[t._v("armeabi-v7a, arm64-v8a, x86")])])])]),t._v(" "),a("h1",{attrs:{id:"集成步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成步骤"}},[t._v("#")]),t._v(" 集成步骤")]),t._v(" "),a("h2",{attrs:{id:"集成sdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成sdk"}},[t._v("#")]),t._v(" 集成SDK")]),t._v(" "),a("p",[a("strong",[t._v("注意:")]),t._v(" 已经在⼯程libs中集成SDK的客户，在升级新版本SDK时，请先删除旧版 SDK，如有旧版本集成的so库也需要同时删除。")]),t._v(" "),a("p",[a("strong",[t._v("SDK接入示例代码(sample):")]),t._v(" "),a("a",{attrs:{href:"https://github.com/trustdecision/mobrisk-android-sample",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/trustdecision/mobrisk-android-sample"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"添加仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加仓库"}},[t._v("#")]),t._v(" 添加仓库")]),t._v(" "),a("p",[t._v("首先, 请在项目根目录的 "),a("code",[t._v("build.gradle")]),t._v("加入maven库的配置")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("allprojects "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    repositories "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mavenCentral")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("如果您的 Gradle 版本是 7 或更高版本，请将这些行添加到您的 "),a("code",[t._v("settings.gradle")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("repositories "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mavenCentral")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"添加依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加依赖"}},[t._v("#")]),t._v(" 添加依赖")]),t._v(" "),a("p",[t._v("在项目的 "),a("code",[t._v("app/build.gradle")]),t._v(" 中加上依赖，如图：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("dependencies "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设备指纹")]),t._v("\n    implementation 'com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("trustdecision"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("android"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("mobrisk"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.2")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".4")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".2")]),t._v("'\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("如果遇到合规性问题，我们也可以在依赖阶段排除相关模块的采集，如下：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("dependencies "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设备指纹")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("implementation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("'com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("trustdecision"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("android"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("mobrisk"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.2")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".4")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".2")]),t._v("'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除后sdk不获取安装包列表")]),t._v("\n        exclude group"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 'com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("trustdecision"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("android'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 'packagelist'\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除后sdk不会收集READ_PHONE_STATE相关信息")]),t._v("\n        exclude group"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 'com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("trustdecision"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("android'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 'readphone'\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"abi类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abi类型"}},[t._v("#")]),t._v(" ABI类型")]),t._v(" "),a("p",[t._v("SDK目前支持 armeabi-v7a、arm64-v8a、x86三种ABI类型，建议接入方在 "),a("code",[t._v("app/build.gradle")]),t._v("文件内添加 "),a("code",[t._v("abiFilters")]),t._v("配置选择所需要的架构类型，示例")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("defaultConfig "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    ndk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       abiFilters 'armeabi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v7a"),a("span",{pre:!0,attrs:{class:"token char"}},[t._v("', '")]),t._v("arm64"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v8a'\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("具体架构，请以您自己需要支持的架构为准！")]),t._v(" "),a("h2",{attrs:{id:"文件配置-androidmanifest-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件配置-androidmanifest-xml"}},[t._v("#")]),t._v(" 文件配置 AndroidManifest.xml")]),t._v(" "),a("p",[t._v("在应⽤module下的 AndroidManifest.xml ⽂件中声明以下权限")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("manifest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--必选权限--\x3e")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--网络通信--\x3e")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("uses-permission")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.permission.INTERNET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--获取网络状态--\x3e")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("uses-permission")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.permission.ACCESS_NETWORK_STATE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--获取WIFI状态--\x3e")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("uses-permission")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.permission.ACCESS_WIFI_STATE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--以下权限是可选权限，不声明此部分权限将放弃部分设备信息的采集，对数据分析及设备指纹的精准度有一定影响--\x3e")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("uses-permission")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.permission.ACCESS_COARSE_LOCATION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("uses-permission")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.permission.ACCESS_FINE_LOCATION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("uses-permission")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.permission.READ_PHONE_STATE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Android11及以上获取安装包列表需要该权限，采集安装包列表涉及到⻛险合规，是否需要该权限业务⽅⾃⾏选\n择 --\x3e")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("uses-permission")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.permission.QUERY_ALL_PACKAGES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tools:")]),t._v("ignore")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("QueryAllPackagesPermission"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("manifest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("动态申请权限： Android 6.0 及以上版本需要动态申请权限，动态申请权限代码必须放在初始化 SDK 前，代码示例如下：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//以下权限不是必须申请. 可根据业务情况选择性权限申请")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VERSION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SDK_INT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("VERSION_CODES"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("M")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestPermissions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Manifest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("permission"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ACCESS_FINE_LOCATION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Manifest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("permission"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ACCESS_COARSE_LOCATION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Manifest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("permission"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("READ_PHONE_STATE")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"sdk-的使用方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sdk-的使用方法"}},[t._v("#")]),t._v(" "),a("strong",[t._v("SDK 的使用方法")])]),t._v(" "),a("p",[a("strong",[t._v("注意事项")])]),t._v(" "),a("p",[t._v("确保在用户同意隐私协议后，再进行SDK初始化，避免出现用户未同意隐私协议就进行SDK初始化采集，引发合规风险。")]),t._v(" "),a("p",[a("strong",[t._v("SDK配置")])]),t._v(" "),a("p",[t._v("TD的sdk使用TDRisk.Builder方法对sdk初始参数进行配置设置，并将设置结果作为初始化参数提供给sdk初始化方法initWithOptions()使用。")]),t._v(" "),a("p",[a("strong",[t._v("TDRisk.Builder必须参数配置如下")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("配置 key")]),t._v(" "),a("th",[t._v("定义")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("示例代码")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("partner")]),t._v(" "),a("td",[t._v("合作方编码")]),t._v(" "),a("td",[t._v("同盾的合作方编码，请联系同盾运营获取")]),t._v(" "),a("td",[t._v('builder.partnerCode("partner")')])]),t._v(" "),a("tr",[a("td",[t._v("appKey")]),t._v(" "),a("td",[t._v("应用标识")]),t._v(" "),a("td",[t._v("同盾生成的应用标识，和app绑定，用于校验app的有效性，请联系同盾运营获取 appkey创建需要用户提供应用包名、小写的sha256 签名。 ⚠️不同应用的包名签名不要使用相同的值")]),t._v(" "),a("td",[t._v('builder.appKey("appKey")')])]),t._v(" "),a("tr",[a("td",[t._v("appName")]),t._v(" "),a("td",[t._v("应用名称")]),t._v(" "),a("td",[t._v("同盾平台注册的应用名称，请联系同盾运营获取")]),t._v(" "),a("td",[t._v('builder.appName("appName")')])]),t._v(" "),a("tr",[a("td",[t._v("country")]),t._v(" "),a("td",[t._v("国家地区")]),t._v(" "),a("td",[a("strong",[t._v("TDRisk.COUNTRY_US")]),t._v(" 北美 "),a("strong",[t._v("TDRisk.COUNTRY_FRA")]),t._v(" 欧洲 "),a("strong",[t._v("TDRisk.COUNTRY_SG")]),t._v(" 新加坡 "),a("strong",[t._v("TDRisk.COUNTRY_CN")]),t._v(" 中国")]),t._v(" "),a("td",[t._v("builder.country(TDRisk.COUNTRY_CN)")])])])]),t._v(" "),a("p",[t._v("我们也提供了可选参数配置，详情可以见附表（初始化配置可选参数列表）")]),t._v(" "),a("p",[a("strong",[t._v("SDK使用方法示例代码:")])]),t._v(" "),a("p",[t._v("在应用启动的时候，比如在应用的 application 的 onCreate 方法中(Android 6.0 及以上版本应确保已经申请过权限)调用以下方法：")]),t._v(" "),a("h4",{attrs:{id:"方式一-推荐的方式-通过getblackbox-方法获取blackbox"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方式一-推荐的方式-通过getblackbox-方法获取blackbox"}},[t._v("#")]),t._v(" 方式一(推荐的方式): "),a("strong",[t._v("通过")]),t._v("getBlackBox() 方法获取blackbox")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SDK初始化配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRisk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Builder")]),t._v(" builder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRisk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*************************** 必传 ***************************/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("partnerCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同盾的合作⽅编码，如demo，请填写⾃身的合作⽅编码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同盾平台注册的应⽤名称，请联系同盾运营获取")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appKey"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置AppKey，请联系同盾运营获取\t\t ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("country")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRisk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNTRY_CN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 国家地区参数，如cn、sg、us、fra")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*************************** 必传 ***************************/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化态势感知SDK")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("⽤户同意隐私协议"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRisk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initWithOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getApplicationContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" builder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("⚠️注意事项：必须保证 "),a("code",[t._v("initWithOptions")]),t._v("后 调用 "),a("code",[t._v("getBlackBox")]),t._v(" 。")]),t._v(" "),a("p",[t._v("在业务需要的时候获取blackbox。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" blackbox "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRisk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBlackBox")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"方式二-通过回调方法callback-在onevent中获取blackbox"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方式二-通过回调方法callback-在onevent中获取blackbox"}},[t._v("#")]),t._v(" 方式二: 通过回调方法callback，在onEvent中获取blackbox")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// SDK初始化配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRisk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Builder")]),t._v(" builder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRisk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*************************** 必传 ***************************/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("partnerCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同盾的合作⽅编码，如demo，请填写⾃身的合作⽅编码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同盾平台注册的应⽤名称，请联系同盾运营获取")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appKey"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置AppKey，请联系同盾运营获取\t\t ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("country")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRisk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNTRY_CN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 国家地区参数，如cn、sg、us、fra")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*************************** 必传 ***************************/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 回调结果")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRiskCallback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" blackbox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此处回调在⼦线程")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ⽹络正常的情况下，会在200-300ms内返回结果。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ⽹络异常的情况下，会在超时时间（默认最长15s）后返回。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请在下⽅添加您对blackbox的处理逻辑")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TDRiskDemo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blackbox: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" blackbox"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化态势感知SDK")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("⽤户同意隐私协议"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRisk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initWithOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getApplicationContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" builder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"两种方式的差异"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#两种方式的差异"}},[t._v("#")]),t._v(" 两种方式的差异")]),t._v(" "),a("ul",[a("li",[t._v("方式一是同步获取blackbox，优点是可以保证会获取到blackbox（一些情况下为降级blackbox），如果在主线程调用 getBlackBox需要注意耗时问题。")]),t._v(" "),a("li",[t._v("方式二是异步获取blackbox，优点是不会阻塞进程，无耗时问题，缺点是调用getBlackBox方式时初始化尚未完成，无法获得blackbox。需要注意 回调结果不是在主线程，禁止在回调中操作UI。")])]),t._v(" "),a("p",[t._v("SDK上报数据成功后，正常情况下，getBlackbox()返回的结果长度为26位字符串. 如: "),a("code",[t._v("rWPGX1678775227I9NCwcuVJCb")]),t._v("。\n异常情况下，长度为5000字符左右. 详情可查看"),a("a",{attrs:{href:"https://doc.trustdecision.com/API?article=36922&version=152",target:"_blank",rel:"noopener noreferrer"}},[t._v("总览"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("执行initWithOptions初始化成功会在 logcat中打印以下log：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TD_JAVA")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Tongdun")]),t._v(" sdk load success\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TD_JAVA")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Tongdun")]),t._v(" sdk init success\n")])])]),a("h2",{attrs:{id:"获取sdk版本号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取sdk版本号"}},[t._v("#")]),t._v(" 获取SDK版本号")]),t._v(" "),a("p",[a("strong",[t._v("示例代码")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取SDK版本号")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TDRisk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSDKVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"其他说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他说明"}},[t._v("#")]),t._v(" 其他说明")]),t._v(" "),a("p",[t._v("混淆打包 如果开发者需要使用 proguard 进行混淆打包，请在 proguard 配置文件添加如下代码：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("#"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TONGDUN")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("keep "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" cn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tongdun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("*"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"初始化配置可选参数列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化配置可选参数列表"}},[t._v("#")]),t._v(" 初始化配置可选参数列表")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("配置 key")]),t._v(" "),a("th",[t._v("定义")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("示例代码")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("setHttpTimeout")]),t._v(" "),a("td",[t._v("SDK超时时间配置（单位:毫秒）")]),t._v(" "),a("td",[t._v("SDK初始化采集上报后，网络请求回调的超时时间，SDK默认为15 * 1000ms")]),t._v(" "),a("td",[t._v("builder.httpTimeout(5000)")])]),t._v(" "),a("tr",[a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("SDK异步回调配置")]),t._v(" "),a("td",[t._v("SDK初始化采集上报后，根据网络请求结果返回blackbox。请求成功：返回非降级blackbox 请求失败：返回降级blackbox")]),t._v(" "),a("td",[t._v("builder.callback()")])]),t._v(" "),a("tr",[a("td",[t._v("collectLevel")]),t._v(" "),a("td",[t._v("降级blackbox采集字段长度配置")]),t._v(" "),a("td",[t._v("降级的blackbox会较长。通过此配置可控制降级的blackbox长度 1.TDRisk.COLLECT_LEVEL_L(默认值, 降级长度为5000字符左右) 2.TDRisk.COLLECT_LEVEL_M(降级长度为2000字符左右)")]),t._v(" "),a("td",[t._v("builder.collectLevel(TDRisk.COLLECT_LEVEL_L)")])]),t._v(" "),a("tr",[a("td",[t._v("blackBoxMaxSize")]),t._v(" "),a("td",[t._v("blackbox 最大长度")]),t._v(" "),a("td",[t._v("默认长度为 Integer.MAX_VALUE, 根据实际设备情况会有上浮")]),t._v(" "),a("td",[t._v("builder.blackBoxMaxSize(3000)")])]),t._v(" "),a("tr",[a("td",[t._v("customProcessName")]),t._v(" "),a("td",[t._v("自定义进程名")]),t._v(" "),a("td",[t._v("更改进程的名称")]),t._v(" "),a("td",[t._v('builder.customProcessName("td")')])]),t._v(" "),a("tr",[a("td",[t._v("forceTLSVersion")]),t._v(" "),a("td",[t._v("https是否强制使用TLS-v1.1版本")]),t._v(" "),a("td",[t._v("默认不强制，开发者根据具体情况进行对应设置")]),t._v(" "),a("td",[t._v("builder.forceTLSVersion(true)")])]),t._v(" "),a("tr",[a("td",[t._v("disableDebugger")]),t._v(" "),a("td",[t._v("是否允许调试")]),t._v(" "),a("td",[t._v("集成SDK后App默认允许调试，开发者根据具体情况进行对应设置")]),t._v(" "),a("td",[t._v("builder.disableDebugger()")])]),t._v(" "),a("tr",[a("td",[t._v("disableRunningTasks")]),t._v(" "),a("td",[t._v("是否允许获取正在运行的任务")]),t._v(" "),a("td",[t._v("默认采集运行任务, 可以调用此方法进行关闭")]),t._v(" "),a("td",[t._v("builder.disableRunningTasks()")])]),t._v(" "),a("tr",[a("td",[t._v("disableGPS")]),t._v(" "),a("td",[t._v("不采集GPS相关信息")]),t._v(" "),a("td",[t._v("如果需要不采集定位相关信息，可通过该方法取消定位相关信息的采集。配置该选项后，应用拥有定位权限，SDK也不会去采集定位相关信息。")]),t._v(" "),a("td",[t._v("builder.disableGPS()")])]),t._v(" "),a("tr",[a("td",[t._v("disableSensor")]),t._v(" "),a("td",[t._v("不采集传感器信息")]),t._v(" "),a("td",[t._v("如果需要不采集传感器相关信息，可通过该方法取消采集相关信息")]),t._v(" "),a("td",[t._v("builder.disableSensor()")])]),t._v(" "),a("tr",[a("td",[t._v("disableReadPhone")]),t._v(" "),a("td",[t._v("不采集READ_PHONE_STATE相关信息")]),t._v(" "),a("td",[t._v("默认采集需要READ_PHONE_STATE权限的信息, 可以调用此方法进行关闭")]),t._v(" "),a("td",[t._v("builder.disableReadPhone()")])]),t._v(" "),a("tr",[a("td",[t._v("disableInstallPackageList")]),t._v(" "),a("td",[t._v("不采集安装包列表")]),t._v(" "),a("td",[t._v("默认采集安装包列表, 可以调用此方法进行关闭")]),t._v(" "),a("td",[t._v("builder.disableInstallPackageList()")])])])]),t._v(" "),a("h1",{attrs:{id:"faq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),a("p",[a("strong",[t._v("Q1")]),t._v("：为什么获取的 blackbox 字段比较长？")]),t._v(" "),a("p",[a("strong",[t._v("A1")]),t._v("：正常情况下 blackbox 长度为 26字节，但是由于网络情况较差或者函数 TDRisk.initWithOptions()和 TDRisk.getBlackBox()调用间隔时间较短时，blackbox 会附带一些设备信息长度将增大到 1500-3000 字节。")]),t._v(" "),a("p",[a("strong",[t._v("Q2")]),t._v("：为什么事件中部分信息为空？")]),t._v(" "),a("p",[a("strong",[t._v("A2")]),t._v("：可能由于从 SDK 初始化到获取设备数据间隔时间过短，造成设备信息获取失败。切勿初始化之后立即获取设备信息。")]),t._v(" "),a("p",[a("strong",[t._v("Q3")]),t._v("：为何部分事件的真实 IP 是空的？")]),t._v(" "),a("p",[a("strong",[t._v("A3")]),t._v("：当 SDK 上传设备信息失败(超时或者网络被屏蔽)时，将自动转为离线模式，此种情况下同盾无法获取真实 IP。")]),t._v(" "),a("p",[a("strong",[t._v("Q4")]),t._v("：为何在某些架构的手机上 app 会崩溃？")]),t._v(" "),a("p",[a("strong",[t._v("A4")]),t._v("：SDK 支持多种架构，如果 app 因此崩溃，可能是对应架构的 so 目录没有导入对应的 so 文件,请注意你的 ndk 支持的架构。")])])}),[],!1,null,null,null);a.default=e.exports}}]);