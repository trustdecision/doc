<!DOCTYPE html>
<html lang="English">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Integrated Requirement | trustdevice</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/td/logo/icon.png">
    <script>
            var _hmt = _hmt || [];
            (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?4430f3f32f20bc88a8d30fe02df17081";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s); })();
            </script>
    <meta name="description" content="">
    <meta name="google-site-verification" content="NSp25_zH--p8r461f1YcEUt0LX9s7oRnyP3iBTvANIQ">
    <meta name="baidu-site-verification" content="codeva-A2SMJcZcws">
    
    <link rel="preload" href="/td/assets/css/0.styles.a099e45a.css" as="style"><link rel="preload" href="/td/assets/js/app.185a84cc.js" as="script"><link rel="preload" href="/td/assets/js/2.2e3d5896.js" as="script"><link rel="preload" href="/td/assets/js/26.4e29552d.js" as="script"><link rel="prefetch" href="/td/assets/js/10.d1a0450d.js"><link rel="prefetch" href="/td/assets/js/11.20c64dab.js"><link rel="prefetch" href="/td/assets/js/12.3d8ad0f6.js"><link rel="prefetch" href="/td/assets/js/13.97bdc425.js"><link rel="prefetch" href="/td/assets/js/14.ffcd274e.js"><link rel="prefetch" href="/td/assets/js/15.276ed812.js"><link rel="prefetch" href="/td/assets/js/16.e2de7c8c.js"><link rel="prefetch" href="/td/assets/js/17.77d1d906.js"><link rel="prefetch" href="/td/assets/js/18.b7c44b45.js"><link rel="prefetch" href="/td/assets/js/19.f3fdc9fc.js"><link rel="prefetch" href="/td/assets/js/20.4ce2f16d.js"><link rel="prefetch" href="/td/assets/js/21.9106a342.js"><link rel="prefetch" href="/td/assets/js/22.8de5b04e.js"><link rel="prefetch" href="/td/assets/js/23.75f67d14.js"><link rel="prefetch" href="/td/assets/js/24.7c417886.js"><link rel="prefetch" href="/td/assets/js/25.7ced5130.js"><link rel="prefetch" href="/td/assets/js/27.c528b1c4.js"><link rel="prefetch" href="/td/assets/js/28.1858c5da.js"><link rel="prefetch" href="/td/assets/js/29.bf9bfb41.js"><link rel="prefetch" href="/td/assets/js/3.2158ca86.js"><link rel="prefetch" href="/td/assets/js/30.e127d219.js"><link rel="prefetch" href="/td/assets/js/31.af9c2105.js"><link rel="prefetch" href="/td/assets/js/32.b89c8ceb.js"><link rel="prefetch" href="/td/assets/js/33.110a9675.js"><link rel="prefetch" href="/td/assets/js/34.2ef87457.js"><link rel="prefetch" href="/td/assets/js/35.35d7147e.js"><link rel="prefetch" href="/td/assets/js/36.4f7e50ed.js"><link rel="prefetch" href="/td/assets/js/37.65bebbe2.js"><link rel="prefetch" href="/td/assets/js/38.a12717c4.js"><link rel="prefetch" href="/td/assets/js/39.4d2a5484.js"><link rel="prefetch" href="/td/assets/js/4.2885e313.js"><link rel="prefetch" href="/td/assets/js/40.e61eb3cb.js"><link rel="prefetch" href="/td/assets/js/41.b36c9bc6.js"><link rel="prefetch" href="/td/assets/js/42.6923d430.js"><link rel="prefetch" href="/td/assets/js/43.c0676a63.js"><link rel="prefetch" href="/td/assets/js/44.a4deda5e.js"><link rel="prefetch" href="/td/assets/js/45.f7fa5a91.js"><link rel="prefetch" href="/td/assets/js/46.eb23c720.js"><link rel="prefetch" href="/td/assets/js/47.21918068.js"><link rel="prefetch" href="/td/assets/js/48.6944f99d.js"><link rel="prefetch" href="/td/assets/js/49.0e78f848.js"><link rel="prefetch" href="/td/assets/js/5.102392b0.js"><link rel="prefetch" href="/td/assets/js/50.923f3a0a.js"><link rel="prefetch" href="/td/assets/js/51.502adbfd.js"><link rel="prefetch" href="/td/assets/js/52.39a8f530.js"><link rel="prefetch" href="/td/assets/js/53.86260b02.js"><link rel="prefetch" href="/td/assets/js/54.4536f93c.js"><link rel="prefetch" href="/td/assets/js/55.0dc4fe6a.js"><link rel="prefetch" href="/td/assets/js/56.f97e27e3.js"><link rel="prefetch" href="/td/assets/js/57.8476743f.js"><link rel="prefetch" href="/td/assets/js/58.93c9de17.js"><link rel="prefetch" href="/td/assets/js/59.0bea9c2e.js"><link rel="prefetch" href="/td/assets/js/6.ea70f831.js"><link rel="prefetch" href="/td/assets/js/7.3611bbe9.js"><link rel="prefetch" href="/td/assets/js/8.8fde20e2.js"><link rel="prefetch" href="/td/assets/js/9.29164caf.js">
    <link rel="stylesheet" href="/td/assets/css/0.styles.a099e45a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/td/" class="home-link router-link-active"><img src="/td/logo/icon.png" alt="trustdevice" class="logo"> <span class="site-name can-hide">trustdevice</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/td/doc/" class="nav-link router-link-active">
  Documentation
</a></div><div class="nav-item"><a href="/td/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/td/doc/captcha/ios.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/td/zh/doc/captcha/ios.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/trustdecision" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/td/doc/" class="nav-link router-link-active">
  Documentation
</a></div><div class="nav-item"><a href="/td/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/td/doc/captcha/ios.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/td/zh/doc/captcha/ios.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/trustdecision" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/td/doc/" aria-current="page" class="sidebar-link">Overview</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Fingerprint</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/td/doc/fingerprint/android.html" class="sidebar-link">Android</a></li><li><a href="/td/doc/fingerprint/ios.html" class="sidebar-link">iOS</a></li><li><a href="/td/doc/fingerprint/js.html" class="sidebar-link">Web</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Captcha</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/td/doc/captcha/android.html" class="sidebar-link">Android</a></li><li><a href="/td/doc/captcha/ios.html" aria-current="page" class="active sidebar-link">iOS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/td/doc/captcha/ios.html#compliance-explanation" class="sidebar-link">Compliance Explanation</a></li><li class="sidebar-sub-header"><a href="/td/doc/captcha/ios.html#environment" class="sidebar-link">Environment</a></li><li class="sidebar-sub-header"><a href="/td/doc/captcha/ios.html#cocoapods" class="sidebar-link">CocoaPods</a></li><li class="sidebar-sub-header"><a href="/td/doc/captcha/ios.html#sdk-structure" class="sidebar-link">SDK Structure</a></li><li class="sidebar-sub-header"><a href="/td/doc/captcha/ios.html#import-header-file" class="sidebar-link">Import Header File</a></li><li class="sidebar-sub-header"><a href="/td/doc/captcha/ios.html#initialization" class="sidebar-link">Initialization</a></li><li class="sidebar-sub-header"><a href="/td/doc/captcha/ios.html#get-sdk-version" class="sidebar-link">Get SDK Version</a></li><li class="sidebar-sub-header"><a href="/td/doc/captcha/ios.html#initwithoptions-optional-parameters" class="sidebar-link">initWithOptions Optional Parameters</a></li><li class="sidebar-sub-header"><a href="/td/doc/captcha/ios.html#popup-captcha-window" class="sidebar-link">Popup Captcha Window</a></li><li class="sidebar-sub-header"><a href="/td/doc/captcha/ios.html#error-code" class="sidebar-link">Error Code</a></li></ul></li><li><a href="/td/doc/captcha/js.html" class="sidebar-link">Web</a></li><li><a href="/td/doc/captcha/weChat.html" class="sidebar-link">WeChat</a></li><li><a href="/td/doc/captcha/alipay.html" class="sidebar-link">Alipay</a></li><li><a href="/td/doc/captcha/byteDance.html" class="sidebar-link">ByteDance</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="integrated-requirement"><a href="#integrated-requirement" class="header-anchor">#</a> Integrated Requirement</h1> <h2 id="compliance-explanation"><a href="#compliance-explanation" class="header-anchor">#</a> Compliance Explanation</h2> <p>Please note that when integrating SDK products provided by the TrustDecision in the APP of your company:</p> <p>1.1 According to the user's information protection regulations, before your users start the App for the first time and start collecting information, your company should fully inform the user of the purpose, method, and scope of collecting, using, and sharing the user's personal information with a third party through an interactive interface or design (such as a pop-up window of the privacy policy), and obtain the express consent of the end user.</p> <p>1.2 To provide business security and risk control services to your company, the TrustDecision SDK will collect, process, and use the identification information（IMEI/IDFA）, AndroidID, IMSI, MEID, MAC address, SIM card serial number, device type, device model, system type, geographical location, login IP address, application list, running process, sensor information(light sensor, gravity sensor, magnetic field sensor, acceleration sensor, gyroscope sensor) and other device information of the user's device. To ensure compliance with your use of related services, the aforementioned privacy policy should cover the authorization of TrustDecision SDK to provide services and collect, process, and use relevant information. The following terms are for your reference. The specific expression can be determined by your company according to the overall framework and content of your privacy agreement:</p> <table border="1"><tr><td style="background-color:#FAFAFA;"><font size="2">TrustDecision SDK: For business security and risk control, our company uses the TrustDecision SDK. The SDK needs to obtain the information of your devices, such as （IMEI/IDFA）, AndroidID, IMSI, MAC address, SIM card serial number, device type, device model, system type, geographic location, login IP address, application list, running process, sensor information(light sensor, gravity sensor, magnetic field sensor, acceleration sensor, gyroscope sensor) and other related device information, for fraud risk identification.</font></td></tr></table> <p><strong>Privacy Protocol:</strong> https://www.trustdecision.com/legal/privacy-policy</p> <h2 id="environment"><a href="#environment" class="header-anchor">#</a> Environment</h2> <table><thead><tr><th>Items</th> <th>Description</th></tr></thead> <tbody><tr><td>Supported System Versions</td> <td>iOS9.0+</td></tr> <tr><td>Supporting architecture</td> <td>armv7, arm64, x86_64</td></tr></tbody></table> <h1 id="integrate-steps"><a href="#integrate-steps" class="header-anchor">#</a> Integrate Steps</h1> <h2 id="cocoapods"><a href="#cocoapods" class="header-anchor">#</a> CocoaPods</h2> <ul><li>Added <code>pod 'TrustDecisionPro', '4.2.4.2'</code> in the corresponding target in the Podfile</li> <li>Added <code>pod 'TrustDecisionCaptcha', '2.1.8'</code> in the corresponding target in the Podfile</li> <li>Execute the <code>pod install --repo-update</code> command in the folder where the Podfile is located. (M1 series mac computers need to execute <code>arch -x86_64 pod install --repo-update</code> command)</li></ul> <h2 id="sdk-structure"><a href="#sdk-structure" class="header-anchor">#</a> SDK Structure</h2> <p>files in Pods/TrustDecisionPro directory:</p> <ul><li>TDMobRisk.framework（TrustDecision SDK, is a static library type）</li> <li>TDCorePlugin.framework （TrustDecision plugin, is an Embed dynamic library type）</li></ul> <p>files in Pods/TrustDecisionCaptcha directory:</p> <ul><li>libTDCaptcha.a（Mob-Risk SDK captcha component library, is a static library type）</li> <li>TDCaptchaResource.bundle (Mob-Risk SDK captcha component Required resource package)</li></ul> <h2 id="import-header-file"><a href="#import-header-file" class="header-anchor">#</a> Import Header File</h2> <p>Please import the header file if you want to call SDK API.</p> <div class="language- extra-class"><pre class="language-text"><code>#import &lt;TDMobRisk/TDMobRisk.h&gt;
</code></pre></div><h2 id="initialization"><a href="#initialization" class="header-anchor">#</a> Initialization</h2> <p><strong>Precautions</strong></p> <p>When the installation starts for the first time, the SDK initialization is performed after the user agrees with the privacy agreement.</p> <p>Avoid SDK initialization collection without the user agreeing to the privacy agreement, causing compliance risk accidents.</p> <h3 id="interface-definition"><a href="#interface-definition" class="header-anchor">#</a> Interface Definition</h3> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>initWithOptions<span class="token punctuation">)</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Sample Code</strong></p> <div class="language-objective extra-class"><pre class="language-text"><code>- (void)initTrustDecisionSDK:(void (^)(NSString *blackbox))callback {

  // Get riskManager
  TDMobRiskManager_t *riskManager = [TDMobRiskManager sharedManager];
  // Initialization Configuration
  NSMutableDictionary *options = [NSMutableDictionary dictionary];

/*************************** Mandatory Parameter ***************************/
  //Partner code, Refer to `Required Configuration`
  [options setValue:@&quot;[Your partner]&quot; forKey:@&quot;partner&quot;];
  //App key, Refer to `Required Configuration`
  [options setValue:@&quot;[Your appKey]&quot; forKey:@&quot;appKey&quot;];
  //App name, Refer to `Required Configuration`
  [options setValue:@&quot;[Your appName]&quot; forKey:@&quot;appName&quot;];
  //Country code, Refer to `Required Configuration`
  [options setValue:@&quot;[Your country code]&quot; forKey:@&quot;country&quot;];

  /*************************** Optional Parameter ***************************/
#ifdef DEBUG
  // !!! If not set this parameter in DEBUG mode, the app will terminate
  [options setValue:@&quot;allowed&quot; forKey:@&quot;allowed&quot;];
#endif


  [options setValue:^(NSString *blackbox) {
    // The callback here is in the sub thread
    // Under normal network conditions, the results will be returned within 200-300ms.
    // If the network is abnormal, it will return after the timeout timeLimit (default: 15s).
    // Please add your processing logic for blackbox below
    if (callback) {
        callback(blackbox);
    }
  } forKey:@&quot;callback&quot;];
  riskManager-&gt;initWithOptions(options);
}
</code></pre></div><p><strong>Required Configuration</strong></p> <table><thead><tr><th>Key</th> <th>Definition</th> <th>Description</th> <th>Scene</th> <th>Sample code</th></tr></thead> <tbody><tr><td>partner</td> <td>Partner code</td> <td>Partner, please contact TrustDecision to obtain</td> <td>All Scenes</td> <td><strong>Objective C</strong> [options setValue:@&quot;[Your partner]&quot; forKey:@&quot;partner&quot;]; <strong>Swift</strong> options.updateValue(&quot;[Your partner]&quot; as NSObject, forKey: &quot;partner&quot;)</td></tr> <tr><td>appKey</td> <td>App key</td> <td>Appkey, please offer your App bundleId for TrustDecision to obtain appkey creation requires the user to provide the application bundleId. ⚠️ Different values for bundleId are used for different applications</td> <td>All Scenes</td> <td><strong>Objective C</strong> [options setValue:@&quot;[Your appKey]&quot; forKey:@&quot;appKey&quot;]; <strong>Swift</strong> options.updateValue(&quot;[Your appKey]&quot; as NSObject, forKey: &quot;appKey&quot;)</td></tr> <tr><td>appName</td> <td>App name</td> <td>AppName, please contact TrustDecision to obtain</td> <td>All Scenes</td> <td><strong>Objective C</strong> [options setValue:@&quot;[Your appName]&quot; forKey:@&quot;appName&quot;]; <strong>Swift</strong> options.updateValue(&quot;[Your appName]&quot; as NSObject, forKey: &quot;appName&quot;)</td></tr> <tr><td>country</td> <td>Country code</td> <td>Country/region parameters, such as cn sg us fra</td> <td>Fill in the corresponding parameters according to country and region of business. cn means China, sg means Singapore, us means North America, fra means Europe</td> <td><strong>Objective C</strong> [options setValue:@&quot;[Your country code]&quot; forKey:@&quot;country&quot;]; <strong>Swift</strong> options.updateValue(&quot;[Your country code]&quot; as NSObject, forKey: &quot;country&quot;)</td></tr></tbody></table> <h2 id="get-sdk-version"><a href="#get-sdk-version" class="header-anchor">#</a> Get SDK Version</h2> <p><strong>Sample Code</strong></p> <div class="language-objective extra-class"><pre class="language-text"><code>// Get SDK Version
TDMobRiskManager_t *riskManager = [TDMobRiskManager sharedManager];
NSString *sdkVersion = riskManager-&gt;getSDKVersion();
</code></pre></div><h1 id="captcha"><a href="#captcha" class="header-anchor">#</a> Captcha</h1> <h2 id="initwithoptions-optional-parameters"><a href="#initwithoptions-optional-parameters" class="header-anchor">#</a> initWithOptions Optional Parameters</h2> <table><thead><tr><th>Key</th> <th>Definition</th> <th>Description</th> <th>Scene</th> <th>Sample code</th></tr></thead> <tbody><tr><td>language</td> <td>language type</td> <td><strong>Options:</strong> 1-Simplified Chinese, 2-Traditional Chinese, 3-English, 4-Japanese, 5-Korean, 6-Malay, 7-Thai, 8-Indonesian, 9-Russian <strong>Default:</strong> 1-Simplified Chinese</td> <td>You can set the language type according to your needs, Chinese mainland support 1-5, overseas support 1-9</td> <td>[options setValue:@&quot;1&quot; forKey:@&quot;language&quot;];</td></tr> <tr><td>tapToClose</td> <td>Click on the blank space to close the Captcha window</td> <td><strong>Optional:</strong> true, false <strong>Default:</strong> false</td> <td>After opening, click on the blank area of the interface to close the Captcha window, which is more convenient to close the pop-up window</td> <td>[options setValue:@(true) forKey:@&quot;tapToClose&quot;];</td></tr> <tr><td>needSeqid</td> <td>Whether to carry the seqid in the failure callback message</td> <td><strong>Optional:</strong> true, false <strong>Default:</strong> true</td> <td>When enabled, the seqid serial number will be carried in the failure message, provide TrustDecision with seqId to facilitate troubleshooting</td> <td>[options setValue:@(true) forKey:@&quot;needSeqid&quot;];</td></tr> <tr><td>hideLoadHud</td> <td>Whether to skip the loading animation</td> <td><strong>Options:</strong> true, false <strong>Default:</strong> false</td> <td>When enabled, the loading animation will not be displayed when the Captcha window pops up, shortening the verification time</td> <td>[options setValue 😡(true) forKey:@&quot;hideLoadHud&quot;];</td></tr> <tr><td>hideWebCloseButton</td> <td>Whether to hide the close button of the webview</td> <td><strong>Options:</strong> true, false <strong>Default:</strong> false</td> <td>Scenarios that need to be forced to complete the Captcha</td> <td>[options setValue:@(true) forKey:@&quot;hideWebCloseButton &quot;];</td></tr> <tr><td>openLog</td> <td>Whether to open the log</td> <td><strong>Options:</strong> true, false <strong>Default:</strong> false</td> <td>When enabled, the console will output more log information during debugging, which is convenient for troubleshooting</td> <td>[options setValue:@( true) forKey:@&quot;openLog&quot;];</td></tr> <tr><td>skipCaptcha</td> <td>Whether to skip the TrustDecision Captcha verification</td> <td><strong>Options:</strong> true, false <strong>Default:</strong> false</td> <td>When enabled, the Captcha will not be verified, and a 4000 error code will be returned at the same time, which is used for dynamic settings Whether to use TrustDecision Captcha SDK verification</td> <td>[options setValue:@(true) forKey:@&quot;skipCaptcha&quot;];</td></tr> <tr><td>mfaId</td> <td>MFA ID</td> <td><strong>Optional:</strong> string <strong>Default:</strong> nil</td> <td>If you have connected to the MFA product (the description can be ignored if the MFA is not connected), please set the mfa_id which is obtained from the MFA process to the configuration parameter.</td> <td>[options setValue:@&quot;mfaId string&quot; forKey:@&quot;mfaId&quot;];</td></tr></tbody></table> <h2 id="popup-captcha-window"><a href="#popup-captcha-window" class="header-anchor">#</a> Popup Captcha Window</h2> <p><strong>showCaptcha method</strong></p> <p>The showCaptcha method is used to display the Captcha window, and its interface is defined as follows</p> <div class="language- extra-class"><pre class="language-text"><code>// Display Captcha window
// @param superView The parent view where the popup is displayed, UIView type
// @param block result callback block
void (*showCaptcha)(id superView,TongdunShowCaptchaBlock block);
</code></pre></div><p><strong>Callback parameter structure TongdunShowCaptchaResultStruct</strong></p> <p>We use the TongdunShowCaptchaResultStruct structure to store the result of the callback;</p> <div class="language- extra-class"><pre class="language-text"><code>typedef enum {
    // The Captcha is verified successfully, and a valid validateToken can be obtained at this time;
    TongdunShowCaptchaResultTypeSuccess,
    // If the Captcha fails, you can get the error code errorCode and errorMsg, and check the cause according to the `Error code` in the document;
    TongdunShowCaptchaResultTypeFailed,
    // The Captcha window pop-up is successful, waiting to be verified;
    TongdunShowCaptchaResultTypeReady,
} TongdunShowCaptchaResultType;


typedef struct _TongdunShowCaptchaResultStruct{
    // return result type
    TongdunShowCaptchaResultType resultType;
    // After returning successfully, the token of the Captcha returned
    const char*validateToken;
    // After the return fails, the returned error code can be checked according to the document
    NSInteger errorCode;
    // Return error message after failure
    const char*errorMsg;
}TongdunShowCaptchaResultStruct;
</code></pre></div><p><strong>Example Code</strong></p> <div class="language-objective extra-class"><pre class="language-text"><code>- (void)showCaptcha {
    UIWindow * keyWindow = [UIApplication sharedApplication].keyWindow;
    TDMobRiskManager_t *riskManager = [TDMobRiskManager sharedManager];
    riskManager-&gt;showCaptcha(keyWindow,^(TongdunShowCaptchaResultStruct resultStruct) {
        switch (resultStruct. resultType) {
            case TongdunShowCaptchaResultTypeSuccess:
            {
                NSString * validateToken = resultStruct.validateToken;
                NSLog(@&quot;Obtain TrustDecision Captcha successfully!!!,validateToken:%@&quot;,validateToken);
            }
                break;
            case TongdunShowCaptchaResultTypeFailed:
            {
                NSString * errorMsg = resultStruct. errorMsg;
                NSLog(@&quot;Get TrustDecision Captcha failed!!!, errorCode:%ld, errorMsg:%@&quot;,resultStruct.errorCode,errorMsg);
            }
                break;
            case TongdunShowCaptchaResultTypeReady:
                NSLog(@&quot;Captcha window popup is successful, waiting to be verified!!!&quot;);
                break;
            default:
                break;
        }
    });
}
</code></pre></div><h2 id="error-code"><a href="#error-code" class="header-anchor">#</a> Error Code</h2> <p>The error code of the captcha function module will be output through [TDMobRiskManager sharedManager]-&gt;showCaptcha method</p> <table><thead><tr><th>Error code</th> <th>Error message</th> <th>Processing method</th></tr></thead> <tbody><tr><td>1001</td> <td>The Captcha window is closed</td> <td>After the Captcha window popup, the user manually cancels the Captcha, no processing is required</td></tr> <tr><td>2001</td> <td>The request parameter is abnormal, please check the parameter</td> <td>Please check the appName and partnerCode parameters</td></tr> <tr><td>2100</td> <td>The request parameter is abnormal, please check the parameter</td> <td>Please check the passed parameter</td></tr> <tr><td>2101</td> <td>The request parameter is abnormal, please check the parameter</td> <td>There is an error in the request process, please contact the operator</td></tr> <tr><td>2102</td> <td>The request parameter is abnormal, please check the parameter</td> <td>The parameter is missing, please check the parameter</td></tr> <tr><td>2111</td> <td>Authentication page network error</td> <td>Try again later, or please contact the operator</td></tr> <tr><td>2112</td> <td>Verification page operation is too frequent</td> <td>Try again later</td></tr> <tr><td>2113</td> <td>Unknown error</td> <td>Unknown error, please contact the operator</td></tr> <tr><td>2114</td> <td>Closed the Captcha window</td> <td>Clicked the Captcha close button, no need to process</td></tr> <tr><td>2115</td> <td>Authentication page network error</td> <td>Failed to load network resources</td></tr> <tr><td>2116</td> <td>Authentication page network error</td> <td>Failed to load network resources</td></tr> <tr><td>2202</td> <td>Verification succeeded</td> <td>The verification result is successful and no processing is required</td></tr> <tr><td>2301</td> <td>Did not purchase this service</td> <td>Please contact the operator</td></tr> <tr><td>2302</td> <td>Traffic has been disabled</td> <td>Please contact the operator</td></tr> <tr><td>2303</td> <td>Insufficient traffic</td> <td>Please contact the operator</td></tr> <tr><td>2304</td> <td>Service has expired</td> <td>Please contact the operator</td></tr> <tr><td>2305</td> <td>Daily traffic has been capped</td> <td>Please contact the operator</td></tr> <tr><td>2600</td> <td>The system is busy, please try again later</td> <td>The system is busy, please try again later</td></tr> <tr><td>2601</td> <td>Authentication failed, try again later</td> <td>Authentication failed, please try again later</td></tr> <tr><td>2602</td> <td>Authentication failed, try again later</td> <td>Authentication failed, please try again later</td></tr> <tr><td>2603</td> <td>Authentication failed, try again later</td> <td>Authentication failed, please try again later</td></tr> <tr><td>2604</td> <td>Authentication failed, try again later</td> <td>Refresh frequently, please try again later</td></tr> <tr><td>2605</td> <td>Verification failed, try again later</td> <td>Failed to obtain Captcha information</td></tr> <tr><td>2702</td> <td>Authentication failed, try again later</td> <td>Parsing error, please try again later</td></tr> <tr><td>3001</td> <td>SSL certificate verification failed</td> <td>Please close the network proxy tool</td></tr> <tr><td>3002</td> <td>Error loading verification page</td> <td>Refresh the network and try again</td></tr> <tr><td>3003</td> <td>Authentication page load timed out</td> <td>Check network and try again</td></tr> <tr><td>4000</td> <td>Validation logic skipping</td> <td>Developers manually handle validation skipping logic</td></tr> <tr><td>9000</td> <td>The device fingerprint is not mounted</td> <td>To integrate the Captcha, you need to integrate the device fingerprint first</td></tr> <tr><td>9001</td> <td>No network</td> <td>Please check network connection</td></tr> <tr><td>9002</td> <td>Request timed out</td> <td>Check network, try again later</td></tr> <tr><td>9003</td> <td>Return result is abnormal</td> <td>Server error, return result is abnormal, contact technical support</td></tr> <tr><td>9004</td> <td>Global loading timed out</td> <td>Check network, try again later</td></tr></tbody></table> <h1 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h1> <p><strong>Q1</strong>: After integrated the TrustDecision SDK, the project can no longer be debugged in Xcode. How to solve it?</p> <p><strong>A1</strong>: Please refer to <a href="https://doc.trustdecision.com/API?article=38852&amp;version=182#Initialization" target="_blank" rel="noopener noreferrer">Initialization<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> When initializing TrustDecision SDK, add the following parameters</p> <div class="language-objective extra-class"><pre class="language-text"><code>[options setValue:@&quot;allowed&quot; forKey:@&quot;allowed&quot;];
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">:</span> <span class="time">2023/06/07 16:19:48</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/td/doc/captcha/android.html" class="prev">
        Android
      </a></span> <span class="next"><a href="/td/doc/captcha/js.html">
        Web
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div></div></div>
    <script src="/td/assets/js/app.185a84cc.js" defer></script><script src="/td/assets/js/2.2e3d5896.js" defer></script><script src="/td/assets/js/26.4e29552d.js" defer></script>
  </body>
</html>
